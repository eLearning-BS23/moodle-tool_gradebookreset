{"version":3,"sources":["../src/resetbutton.js"],"names":["define","$","Ajax","ModalFactory","ModalEvents","Notification","on","e","elementid","attr","array","split","userid","length","clickedLink","currentTarget","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","root","getRoot","save","data","console","log","request","methodname","args","call","done","warnings","addNotification","message","fail","exception","show"],"mappings":"AAUAA,OAAM,0CAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,oBAAxB,CAA8C,mBAA9C,CAAmE,mBAAnE,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgCC,CAAhC,CAA6CC,CAA7C,CAA2D,CACvDJ,CAAC,CAAC,cAAD,CAAD,CAAkBK,EAAlB,CAAqB,OAArB,CAA8B,SAASC,CAAT,CAAY,IAClCC,CAAAA,CAAS,CAAGP,CAAC,CAAC,IAAD,CAAD,CAAQQ,IAAR,CAAa,IAAb,CADsB,CAElCC,CAAK,CAAGF,CAAS,CAACG,KAAV,CAAgB,GAAhB,CAF0B,CAGlCC,CAAM,CAAGF,CAAK,CAACA,CAAK,CAACG,MAAN,CAAe,CAAhB,CAHoB,CAIlCC,CAAW,CAAGb,CAAC,CAACM,CAAC,CAACQ,aAAH,CAJmB,CAKtCZ,CAAY,CAACa,MAAb,CAAoB,CAChBC,IAAI,CAAEd,CAAY,CAACe,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAE,aAFS,CAGhBC,IAAI,CAAE,8BAHU,CAApB,EAIGC,IAJH,CAIQ,SAAUC,CAAV,CAAiB,CACrBA,CAAK,CAACC,iBAAN,CAAwB,OAAxB,EACA,GAAIC,CAAAA,CAAI,CAAGF,CAAK,CAACG,OAAN,EAAX,CACAD,CAAI,CAACnB,EAAL,CAAQF,CAAW,CAACuB,IAApB,CAA0B,UAAY,CAClBb,CAAW,CAACc,IAAZ,CAAiB,IAAjB,CADkB,CAGlCC,OAAO,CAACC,GAAR,CAAYlB,CAAZ,EAHkC,GAQ9BmB,CAAAA,CAAO,CAAG,CACVC,UAAU,0CADA,CAEVC,IAAI,CALK,CACT,OAAUrB,CADD,CAGC,CARoB,CAYlCiB,OAAO,CAACC,GAAR,CAAYC,CAAZ,EACA7B,CAAI,CAACgC,IAAL,CAAU,CAACH,CAAD,CAAV,EAAqB,CAArB,EAAwBI,IAAxB,CAA6B,SAASP,CAAT,CAAe,CACxCC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACA,GAA2B,CAAvB,CAAAA,CAAI,CAACQ,QAAL,CAAcvB,MAAlB,CAA8B,CAE1BgB,OAAO,CAACC,GAAR,CAAYF,CAAZ,CACH,CAHD,IAGO,CACHvB,CAAY,CAACgC,eAAb,CAA6B,CACzBC,OAAO,CAAE,uBADgB,CAEzBrB,IAAI,CAAE,OAFmB,CAA7B,CAIH,CACJ,CAXD,EAWGsB,IAXH,CAWQlC,CAAY,CAACmC,SAXrB,CAYH,CAzBD,EA0BAjB,CAAK,CAACkB,IAAN,EACP,CAlCG,CAmCP,CAxCG,CAyCP,CA3CK,CAAN","sourcesContent":["// define(['jquery','core/notification'], function($) {\n//     $(document).ready(function ($,notification) {\n//         //console.log(\"Hello world! from lib file\");\n//         $('.resetbutton').click(function () {\n//             console.log($(this).attr('id'));\n//             confirm(\"are you sure?\");\n//         });\n//     });\n//\n// });\ndefine(['jquery', 'core/ajax', 'core/modal_factory', 'core/modal_events', 'core/notification'],\n    function($, Ajax, ModalFactory, ModalEvents, Notification) {\n        $('.resetbutton').on('click', function(e) {\n            var elementid = $(this).attr('id');\n            var array = elementid.split(\"_\");\n            var userid = array[array.length - 1];\n            var clickedLink = $(e.currentTarget);\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: 'Reset grade',\n                body: 'Do you really want to reset?',\n            }).then(function (modal) {\n                modal.setSaveButtonText('Reset');\n                var root = modal.getRoot();\n                root.on(ModalEvents.save, function () {\n                    var elementid = clickedLink.data('id');\n                    // Do something to delete item\n                    console.log(userid);\n                    var wsfunction = 'tool_resetcoursecompletion_reset_grades';\n                    var params = {\n                        'userid': userid,\n                    }\n                    var request = {\n                        methodname: wsfunction,\n                        args: params\n                    };\n                    console.log(request);\n                    Ajax.call([request])[0].done(function(data) {\n                        console.log(data);\n                        if (data.warnings.length < 1) {\n                            // NO; pictureCounter++;\n                            console.log(data);\n                        } else {\n                            Notification.addNotification({\n                                message: 'Something went wrong!',\n                                type: 'error'\n                            });\n                        }\n                    }).fail(Notification.exception);\n                });\n                modal.show();\n        });\n    });\n});"],"file":"resetbutton.min.js"}